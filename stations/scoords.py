import requests
import json
import time
from dotenv import load_dotenv
import os

load_dotenv()

KAKAO_API_KEY = os.getenv("KAKAO_REST_API_KEY")

station_names = ['성환역 1호선', '평택역 1호선', '구로역 1호선', '남영역 1호선', '동묘앞역 1호선', '안양역 1호선', '부천역 1호선', '명학역 1호선', '회기역 1호선', '동암역 1호선', '탕정역 1호선', '덕계역 1호선', '동두천역 1호선', '청량리역 1호선', '제기동역 1호선', '신설동역 1호선', '동대문역 1호선', '종로5가역 1호선', '종로3가역 1호선', '금정역 1호선', '서동탄역 1호선', '개봉역 1호선', '전곡역 1호선', '소요산역 1호선', '동두천중앙역 1호선', '간석역 1호선', '종각역 1호선', '시청역 1호선', '서울역 1호선', '독산역 1호선', '소사역 1호선', '인천역 1호선', '송내역 1호선', '화서역 1호선', '군포역 1호선', '방학역 1호선', '덕정역 1호선', '보산역 1호선', '온수역 1호선', '청산역 1호선', '가능역 1호선', '부개역 1호선', '오류동역 1호선', '직산역 1호선', '관악역 1호선', '신이문역 1호선', '천안역 1호선', '세마역 1호선', '진위역 1호선', '도봉산역 1호선', '구일역 1호선', '서정리역 1호선', '의왕역 1호선', '녹천역 1호선', '망월사역 1호선', '당정역 1호선', '회룡역 1호선', '온양온천역 1호선', '도봉역 1호선', '연천역 1호선', '의정부역 1호선', '녹양역 1호선', '석계역 1호선', '영등포역 1호선', '쌍용역 1호선', '양주역 1호선', '배방역 1호선', '지행역 1호선', '송탄역 1호선', '두정역 1호선', '신길역 1호선', '월계역 1호선', '광운대역 1호선', '외대앞역 1호선', '노량진역 1호선', '용산역 1호선', '주안역 1호선', '아산역 1호선', '대방역 1호선', '봉명역 1호선', '평택지제역 1호선', '수원역 1호선', '성균관대역 1호선', '석수역 1호선', '금천구청역 1호선', '가산디지털단지역 1호선', '세류역 1호선', '병점역 1호선', '오산대역 1호선', '광명역 1호선', '신창역 1호선', '창동역 1호선', '역곡역 1호선', '도화역 1호선', '중동역 1호선', '오산역 1호선', '도원역 1호선', '동인천역 1호선', '제물포역 1호선', '신도림역 1호선', '백운역 1호선', '부평역 1호선', '잠실새내역 2호선', '대림역 2호선', '서울대입구역 2호선', '한양대역 2호선', '신도림역 2호선', '아현역 2호선', '봉천역 2호선', '충정로역 2호선', '용답역 2호선', '문래역 2호선', '신림역 2호선', '종합운동장역 2호선', '삼성역 2호선', '신대방역 2호선', '영등포구청역 2호선', '양천구청역 2호선', '을지로4가역 2호선', '뚝섬역 2호선', '신답역 2호선', '을지로입구역 2호선', '사당역 2호선', '을지로3가역 2호선', '성수역 2호선', '건대입구역 2호선', '당산역 2호선', '신정네거리역 2호선', '구의역 2호선', '합정역 2호선', '용두역 2호선', '구로디지털단지역 2호선', '홍대입구역 2호선', '신촌역 2호선', '이대역 2호선', '신설동역 2호선', '도림천역 2호선', '까치산역 2호선', '시청역 2호선', '동대문역사문화공원역 2호선', '신당역 2호선', '상왕십리역 2호선', '강변역 2호선', '잠실나루역 2호선', '잠실역 2호선', '선릉역 2호선', '역삼역 2호선', '강남역 2호선', '교대역 2호선', '서초역 2호선', '방배역 2호선', '낙성대역 2호선', '왕십리역 2호선', '경찰병원역 3호선', '안국역 3호선', '학여울역 3호선', '원당역 3호선', '주엽역 3호선', '매봉역 3호선', '옥수역 3호선', '삼송역 3호선', '금호역 3호선', '마두역 3호선', '원흥역 3호선', '백석역 3호선', '양재역 3호선', '대곡역 3호선', '가락시장역 3호선', '수서역 3호선', '정발산역 3호선', '오금역 3호선', '을지로3가역 3호선', '화정역 3호선', '일원역 3호선', '남부터미널역 3호선', '종로3가역 3호선', '도곡역 3호선', '경복궁역 3호선', '신사역 3호선', '독립문역 3호선', '동대입구역 3호선', '대치역 3호선', '무악재역 3호선', '교대역 3호선', '홍제역 3호선', '고속터미널역 3호선', '녹번역 3호선', '불광역 3호선', '연신내역 3호선', '대화역 3호선', '구파발역 3호선', '약수역 3호선', '지축역 3호선', '압구정역 3호선', '충무로역 3호선', '잠원역 3호선', '대청역 3호선', '반월역 4호선', '상록수역 4호선', '한대앞역 4호선', '동작역 4호선', '노원역 4호선', '신용산역 4호선', '금정역 4호선', '길음역 4호선', '삼각지역 4호선', '동대문역 4호선', '안산역 4호선', '범계역 4호선', '고잔역 4호선', '경마공원역 4호선', '대공원역 4호선', '인덕원역 4호선', '충무로역 4호선', '정부과천청사역 4호선', '미아사거리역 4호선', '한성대입구역 4호선', '중앙역 4호선', '산본역 4호선', '과천역 4호선', '수유역 4호선', '이촌역 4호선', '평촌역 4호선', '수리산역 4호선', '혜화역 4호선', '신길온천역 4호선', '대야미역 4호선', '서울역 4호선', '사당역 4호선', '남태령역 4호선', '정왕역 4호선', '성신여대입구역 4호선', '쌍문역 4호선', '상계역 4호선', '불암산역 4호선', '별내별가람역 4호선', '오남역 4호선', '진접역 4호선', '명동역 4호선', '창동역 4호선', '동대문역사문화공원역 4호선', '숙대입구역 4호선', '초지역 4호선', '미아역 4호선', '총신대입구역 4호선', '회현역 4호선', '선바위역 4호선', '오이도역 4호선', '강일역 5호선', '아차산역 5호선', '여의도역 5호선', '여의나루역 5호선', '거여역 5호선', '미사역 5호선', '하남검단산역 5호선', '하남시청역 5호선', '마천역 5호선', '개롱역 5호선', '오금역 5호선', '올림픽공원역 5호선', '둔촌동역 5호선', '고덕역 5호선', '명일역 5호선', '굽은다리역 5호선', '길동역 5호선', '강동역 5호선', '광나루역 5호선', '군자역 5호선', '장한평역 5호선', '마장역 5호선', '왕십리역 5호선', '행당역 5호선', '신금호역 5호선', '동대문역사문화공원역 5호선', '을지로4가역 5호선', '종로3가역 5호선', '광화문역 5호선', '충정로역 5호선', '공덕역 5호선', '신길역 5호선', '영등포구청역 5호선', '신정역 5호선', '화곡역 5호선', '우장산역 5호선', '발산역 5호선', '마곡역 5호선', '방화역 5호선', '서대문역 5호선', '천호역 5호선', '청구역 5호선', '오목교역 5호선', '목동역 5호선', '송정역 5호선', '개화산역 5호선', '까치산역 5호선', '김포공항역 5호선', '방이역 5호선', '영등포시장역 5호선', '상일동역 5호선', '애오개역 5호선', '양평역 5호선', '하남풍산역 5호선', '답십리역 5호선', '마포역 5호선', '돌곶이역 6호선', '태릉입구역 6호선', '효창공원앞역 6호선', '청구역 6호선', '봉화산역 6호선', '월드컵경기장역 6호선', '마포구청역 6호선', '고려대역 6호선', '망원역 6호선', '안암역 6호선', '보문역 6호선', '삼각지역 6호선', '녹사평역 6호선', '창신역 6호선', '이태원역 6호선', '버티고개역 6호선', '한강진역 6호선', '동묘앞역 6호선', '신당역 6호선', '약수역 6호선', '불광역 6호선', '석계역 6호선', '응암역 6호선', '화랑대역 6호선', '합정역 6호선', '광흥창역 6호선', '역촌역 6호선', '독바위역 6호선', '상월곡역 6호선', '상수역 6호선', '신내역 6호선', '공덕역 6호선', '구산역 6호선', '연신내역 6호선', '새절역 6호선', '증산역 6호선', '디지털미디어시티역 6호선', '대흥역 6호선', '월곡역 6호선', '남성역 7호선', '군자역 7호선', '이수역 7호선', '고속터미널역 7호선', '논현역 7호선', '중곡역 7호선', '용마산역 7호선', '면목역 7호선', '온수역 7호선', '천왕역 7호선', '철산역 7호선', '청담역 7호선', '상봉역 7호선', '학동역 7호선', '중화역 7호선', '강남구청역 7호선', '먹골역 7호선', '태릉입구역 7호선', '중계역 7호선', '노원역 7호선', '석남역 7호선', '산곡역 7호선', '부평구청역 7호선', '건대입구역 7호선', '공릉역 7호선', '하계역 7호선', '마들역 7호선', '수락산역 7호선', '상동역 7호선', '부천시청역 7호선', '신중동역 7호선', '춘의역 7호선', '부천종합운동장역 7호선', '까치울역 7호선', '신풍역 7호선', '상도역 7호선', '내방역 7호선', '도봉산역 7호선', '장암역 7호선', '광명사거리역 7호선', '가산디지털단지역 7호선', '반포역 7호선', '사가정역 7호선', '자양역 7호선', '남구로역 7호선', '대림역 7호선', '보라매역 7호선', '신대방삼거리역 7호선', '굴포천역 7호선', '삼산체육관역 7호선', '장승배기역 7호선', '어린이대공원역 7호선', '숭실대입구역 7호선', '문정역 8호선', '송파역 8호선', '복정역 8호선', '암사역 8호선', '구리역 8호선', '동구릉역 8호선', '별내역 8호선', '장지역 8호선', '수진역 8호선', '신흥역 8호선', '모란역 8호선', '남한산성입구역 8호선', '강동구청역 8호선', '몽촌토성역 8호선', '장자호수공원역 8호선', '잠실역 8호선', '단대오거리역 8호선', '석촌역 8호선', '산성역 8호선', '남위례역 8호선', '암사역사공원역 8호선', '가락시장역 8호선', '천호역 8호선', '다산역 8호선', '개화역 9호선', '송파나루역 9호선', '석촌역 9호선', '석촌고분역 9호선', '삼전역 9호선', '고속터미널역 9호선', '종합운동장역 9호선', '봉은사역 9호선', '증미역 9호선', '삼성중앙역 9호선', '등촌역 9호선', '염창역 9호선', '신목동역 9호선', '국회의사당역 9호선', '여의도역 9호선', '동작역 9호선', '선정릉역 9호선', '당산역 9호선', '선유도역 9호선', '노량진역 9호선', '샛강역 9호선', '가양역 9호선', '양천향교역 9호선', '중앙보훈병원역 9호선', '신반포역 9호선', '사평역 9호선', '둔촌오륜역 9호선', '올림픽공원역 9호선', '노들역 9호선', '한성백제역 9호선', '마곡나루역 9호선', '신논현역 9호선', '언주역 9호선', '흑석역 9호선', '구반포역 9호선', '신방화역 9호선', '공항시장역 9호선', '김포공항역 9호선', '수서역 GTX-A', '성남역 GTX-A', '구성역 GTX-A', '동탄역 GTX-A', '운정중앙역 GTX-A', '킨텍스역 GTX-A', '대곡역 GTX-A', '연신내역 GTX-A', '서울역 GTX-A', '곤지암역 경강선', '판교역 경강선', '부발역 경강선', '성남역 경강선', '이매역 경강선', '신둔도예촌역 경강선', '세종대왕릉역 경강선', '초월역 경강선', '여주역 경강선', '경기광주역 경강선', '삼동역 경강선', '이천역 경강선', '이촌역 경의선', '상봉역 경의선', '양원역 경의선', '신촌역 경의선', '금릉역 경의선', '임진강역 경의선', '도농역 경의선', '양정역 경의선', '양평역 경의선', '금촌역 경의선', '오빈역 경의선', '아신역 경의선', '국수역 경의선', '양수역 경의선', '운길산역 경의선', '덕소역 경의선', '중랑역 경의선', '도심역 경의선', '용산역 경의선', '한국항공대역 경의선', '서빙고역 경의선', '능곡역 경의선', '대곡역 경의선', '수색역 경의선', '왕십리역 경의선', '운천역 경의선', '파주역 경의선', '월롱역 경의선', '일산역 경의선', '행신역 경의선', '지평역 경의선', '신원역 경의선', '홍대입구역 경의선', '용문역 경의선', '팔당역 경의선', '회기역 경의선', '응봉역 경의선', '옥수역 경의선', '문산역 경의선', '운정역 경의선', '야당역 경의선', '탄현역 경의선', '풍산역 경의선', '백마역 경의선', '곡산역 경의선', '강매역 경의선', '디지털미디어시티역 경의선', '가좌역 경의선', '서강대역 경의선', '청량리역 경의선', '망우역 경의선', '효창공원앞역 경의선', '서울역 경의선', '구리역 경의선', '공덕역 경의선', '원덕역 경의선', '한남역 경의선', '김유정역 경춘선', '강촌역 경춘선', '백양리역 경춘선', '신내역 경춘선', '가평역 경춘선', '퇴계원역 경춘선', '금곡역 경춘선', '사릉역 경춘선', '갈매역 경춘선', '대성리역 경춘선', '굴봉산역 경춘선', '마석역 경춘선', '남춘천역 경춘선', '춘천역 경춘선', '평내호평역 경춘선', '청평역 경춘선', '중랑역 경춘선', '별내역 경춘선', '천마산역 경춘선', '상봉역 경춘선', '망우역 경춘선', '상천역 경춘선', '청량리역 경춘선', '회기역 경춘선', '광운대역 경춘선', '홍대입구역 공항철도', '마곡나루역 공항철도', '김포공항역 공항철도', '계양역 공항철도', '영종역 공항철도', '인천공항2터미널역 공항철도', '인천공항1터미널역 공항철도', '공항화물청사역 공항철도', '운서역 공항철도', '청라국제도시역 공항철도', '검암역 공항철도', '서울역 공항철도', '공덕역 공항철도', '디지털미디어시티역 공항철도', '사우역 김포도시철도', '운양역 김포도시철도', '양촌역 김포도시철도', '구래역 김포도시철도', '마산역 김포도시철도', '장기역 김포도시철도', '풍무역 김포도시철도', '걸포북변역 김포도시철도', '김포공항역 김포도시철도', '고촌역 김포도시철도', '선부역 서해선', '신현역 서해선', '초지역 서해선', '달미역 서해선', '풍산역 서해선', '능곡역 서해선', '시흥시청역 서해선', '시흥능곡역 서해선', '김포공항역 서해선', '신천역 서해선', '부천종합운동장역 서해선', '곡산역 서해선', '시흥대야역 서해선', '소새울역 서해선', '소사역 서해선', '백마역 서해선', '원시역 서해선', '원종역 서해선', '대곡역 서해선', '시우역 서해선', '일산역 서해선', '보정역 수인분당선', '송도역 수인분당선', '호구포역 수인분당선', '오목천역 수인분당선', '기흥역 수인분당선', '태평역 수인분당선', '인천역 수인분당선', '야탑역 수인분당선', '남동인더스파크역 수인분당선', '인하대역 수인분당선', '월곶역 수인분당선', '상갈역 수인분당선', '수내역 수인분당선', '선정릉역 수인분당선', '중앙역 수인분당선', '숭의역 수인분당선', '죽전역 수인분당선', '오리역 수인분당선', '영통역 수인분당선', '한티역 수인분당선', '야목역 수인분당선', '구성역 수인분당선', '미금역 수인분당선', '안산역 수인분당선', '압구정로데오역 수인분당선', '고잔역 수인분당선', '대모산입구역 수인분당선', '달월역 수인분당선', '복정역 수인분당선', '왕십리역 수인분당선', '선릉역 수인분당선', '청량리역 수인분당선', '정왕역 수인분당선', '초지역 수인분당선', '한대앞역 수인분당선', '신갈역 수인분당선', '신포역 수인분당선', '정자역 수인분당선', '모란역 수인분당선', '가천대역 수인분당선', '강남구청역 수인분당선', '인천논현역 수인분당선', '소래포구역 수인분당선', '매교역 수인분당선', '신길온천역 수인분당선', '개포동역 수인분당선', '연수역 수인분당선', '수원시청역 수인분당선', '원인재역 수인분당선', '수서역 수인분당선', '매탄권선역 수인분당선', '서현역 수인분당선', '서울숲역 수인분당선', '어천역 수인분당선', '고색역 수인분당선', '구룡역 수인분당선', '망포역 수인분당선', '수원역 수인분당선', '도곡역 수인분당선', '사리역 수인분당선', '오이도역 수인분당선', '청명역 수인분당선', '이매역 수인분당선', '보라매역 신림선', '대방역 신림선', '당곡역 신림선', '관악산역 신림선', '서울대벤처타운역 신림선', '서울지방병무청역 신림선', '서원역 신림선', '보라매병원역 신림선', '보라매공원역 신림선', '신림역 신림선', '샛강역 신림선', '신사역 신분당선', '성복역 신분당선', '광교중앙역 신분당선', '상현역 신분당선', '양재역 신분당선', '광교역 신분당선', '양재시민의숲역 신분당선', '청계산입구역 신분당선', '판교역 신분당선', '정자역 신분당선', '미금역 신분당선', '동천역 신분당선', '수지구청역 신분당선', '강남역 신분당선', '신논현역 신분당선', '논현역 신분당선', '초당역 용인경전철', '기흥역 용인경전철', '강남대역 용인경전철', '지석역 용인경전철', '어정역 용인경전철', '동백역 용인경전철', '삼가역 용인경전철', '시청용인대역 용인경전철', '명지대역 용인경전철', '김량장역 용인경전철', '용인중앙시장역 용인경전철', '고진역 용인경전철', '보평역 용인경전철', '둔전역 용인경전철', '전대에버랜드역 용인경전철', '북한산보국문역 우이신설선', '성신여대입구역 우이신설선', '가오리역 우이신설선', '북한산우이역 우이신설선', '솔밭공원역 우이신설선', '정릉역 우이신설선', '화계역 우이신설선', '삼양역 우이신설선', '삼양사거리역 우이신설선', '솔샘역 우이신설선', '419민주묘지역 우이신설선', '보문역 우이신설선', '신설동역 우이신설선', '흥선역 의정부경전철', '의정부중앙역 의정부경전철', '의정부시청역 의정부경전철', '동오역 의정부경전철', '새말역 의정부경전철', '경기도청북부청사역 의정부경전철', '효자역 의정부경전철', '곤제역 의정부경전철', '어룡역 의정부경전철', '송산역 의정부경전철', '탑석역 의정부경전철', '발곡역 의정부경전철', '회룡역 의정부경전철', '범골역 의정부경전철', '경전철의정부역 의정부경전철', '완정역 인천2호선', '모래내시장역 인천2호선', '석천사거리역 인천2호선', '인천시청역 인천2호선', '검단오류역 인천2호선', '주안역 인천2호선', '석바위시장역 인천2호선', '시민공원역 인천2호선', '주안국가산단역 인천2호선', '가재울역 인천2호선', '인천가좌역 인천2호선', '서부여성회관역 인천2호선', '석남역 인천2호선', '가정중앙시장역 인천2호선', '검단사거리역 인천2호선', '서구청역 인천2호선', '검바위역 인천2호선', '검암역 인천2호선', '만수역 인천2호선', '남동구청역 인천2호선', '아시아드경기장역 인천2호선', '마전역 인천2호선', '왕길역 인천2호선', '독정역 인천2호선', '운연역 인천2호선', '인천대공원역 인천2호선', '가정역 인천2호선', '계양역 인천1호선', '인천시청역 인천1호선', '인천터미널역 인천1호선', '문학경기장역 인천1호선', '선학역 인천1호선', '신연수역 인천1호선', '부평시장역 인천1호선', '부평구청역 인천1호선', '임학역 인천1호선', '박촌역 인천1호선', '갈산역 인천1호선', '부평삼거리역 인천1호선', '동막역 인천1호선', '원인재역 인천1호선', '테크노파크역 인천1호선', '아라역 인천1호선', '신검단중앙역 인천1호선', '검단호수공원역 인천1호선', '동춘역 인천1호선', '간석오거리역 인천1호선', '동수역 인천1호선', '작전역 인천1호선', '센트럴파크역 인천1호선', '인천대입구역 인천1호선', '지식정보단지역 인천1호선', '국제업무지구역 인천1호선', '송도달빛축제공원역 인천1호선', '캠퍼스타운역 인천1호선', '부평역 인천1호선', '경인교대입구역 인천1호선', '계산역 인천1호선', '귤현역 인천1호선', '예술회관역 인천1호선']

results = []

for name in station_names:
    query = name.strip() + "역"

    response = requests.get(
        "https://dapi.kakao.com/v2/local/search/keyword.json",
        headers={"Authorization": f"KakaoAK {KAKAO_API_KEY}"},
        params={"query": name, "category_group_code": "SW8"}  # SW8 = 지하철역
    )

    data = response.json()

    if data.get("documents"):
        doc = data["documents"][0]
        station_info = {
            "name": name,
            "place_name": doc["place_name"],
            "lat": doc["y"],
            "lng": doc["x"]
        }
        print(f"✅ {name}: {station_info['lat']}, {station_info['lng']}")
        results.append(station_info)
    else:
        print(f"❌ {name}: 좌표 없음")
        results.append({
            "name": name,
            "place_name": None,
            "lat": None,
            "lng": None
        })

    time.sleep(0.3)  # Kakao API rate limit 회피를 위한 딜레이

# 결과를 JSON으로 저장
with open("station_coords.json", "w", encoding="utf-8") as f:
    json.dump(results, f, ensure_ascii=False, indent=2)

print("\n🎉 저장 완료: station_coords.json")